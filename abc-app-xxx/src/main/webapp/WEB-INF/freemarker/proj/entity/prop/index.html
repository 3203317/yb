<#include "/_pagelet/constant.html"/>
<!DOCTYPE html>
<html lang="zh">
	<head>
		<title>实体属性 | 后台管理</title>
		<#include "/_pagelet/header.html"/>
	</head>

	<body>
		<#include "/default/_pagelet/nav.html"/>

		<div class="main-container container-fluid">
			<a class="menu-toggler" id="menu-toggler" href='javascript:;'>
				<span class="menu-text"></span>
			</a>

			<#include "/default/_pagelet/sidebar.html"/>

			<div class="main-content">
				<div class="breadcrumbs" id="breadcrumbs">
					<ul class="breadcrumb">
						<li>
							<i class="icon-home home-icon"></i>
							<a href="/">首页</a>

							<span class="divider">
								<i class="icon-angle-right arrow-icon"></i>
							</span>
						</li>

						<li>
							代码生成
							<span class="divider">
								<i class="icon-angle-right arrow-icon"></i>
							</span>
						</li>
						<li class="active">实体属性</li>
					</ul><!--.breadcrumb-->

					<div class="nav-search" id="nav-search">
						<form class="form-search" />
							<span class="input-icon">
								<input type="text" placeholder="搜索" class="input-small nav-search-input" id="nav-search-input" autocomplete="off" />
								<i class="icon-search nav-search-icon"></i>
							</span>
						</form>
					</div><!--#nav-search-->
				</div>

				<div class="page-content">

					<div class="page-header position-relative">
						<h1>
							实体属性
							<small>
								<i class="icon-double-angle-right"></i>
								Entity Prop Create
							</small>
						</h1>
					</div><!--/.page-header-->

					<div class="row-fluid">
						<div class="span12">
							<!--PAGE CONTENT BEGINS-->

							<div class="alert alert-block alert-error">
								<button type="button" class="close" data-dismiss="alert">
									<i class="icon-remove"></i>
								</button>

								<strong>
									<i class="icon-info-sign"></i>
									系统提示：
								</strong>
							</div>

							<div class="row-fluid">
								<p>
									<a href='./add?pe_id=${(data_pe_id)!}' class="btn btn-app btn-info btn-mini">
										<i class="icon-save bigger-200"></i>
										添加
										<span class="label label-inverse arrowed-in">6+</span>
									</a>

									<a href='javascript:;' class="btn btn-app btn-primary btn-mini">
										<i class="icon-edit bigger-230"></i>
										修改
										<span class="badge badge-warning badge-right">11</span>
									</a>

									<a href='javascript:;' class="btn btn-app btn-danger btn-mini">
										<i class="icon-trash bigger-200"></i>
										删除
									</a>

									<#-- <!-- <a href='javascript:;' class="btn btn-app btn-grey btn-mini radius-4">
										<i class="icon-flag bigger-160"></i>
										状态
										<span class="badge badge-transparent">
											<i class="light-red icon-asterisk"></i>
										</span>
									</a> -->
								</p>
							</div><!-- buttons -->

							<div class="row-fluid">
								<div class="span12">

									<table id="table_1" class="table table-striped table-bordered table-hover"
											data-olx-type='olx.grid' data-current='1' data-pagesize='20' data-count='561'>
										<thead>
											<tr>
												<th class="center">#</th>
												<th>属性名称</th>
												<th class="hidden-480">属性描述</th>
												<th>数据类型</th>

												<th>最大</th>
												<th>最小</th>

												<th>正则</th>
												<th>允许空</th>
												<th>排除</th>

												<th>默认值</th>
												<th>验证消息</th>

												<th>操作</th>
											</tr>
										</thead>

										<tbody>
										<#import "/_macro/status.html" as status>
										<#list data_list_pep! as doc>
											<tr>
												<td class="center">${doc_index+1}</td>

												<td>${(doc.id)!}</a></td>
												<td class="hidden-480">${(doc.prop_desc)!}</td>
												<td>${(doc.prop_type)!}</a></td>

												<td>${(doc.len_max)!}</a></td>
												<td>${(doc.len_min)!}</a></td>

												<td>${(doc.regex)!}</a></td>
												<td>${(doc.is_null)!}</a></td>
												<td>${(doc.is_transient)!}</a></td>

												<td>${(doc.def_val)!}</a></td>
												<td>${(doc.valid_msg)!}</a></td>

												<td>
													<div class="hidden-phone visible-desktop btn-group">

														<a class="btn btn-mini btn-info" title='编辑' href='./edit?id=${(doc.id)!}&entity_id=${(doc.entity_id)!}'>
															<i class="icon-edit bigger-120"></i>
														</a>

														<a class="btn btn-mini btn-danger" title='删除' href='javascript:del("${(doc.id)!}", "${(doc.entity_id)!}")'>
															<i class="icon-trash bigger-120"></i>
														</a>

													</div>

													<div class="hidden-desktop visible-phone">
														<div class="inline position-relative">
															<button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown">
																<i class="icon-cog icon-only bigger-110"></i>
															</button>

															<ul class="dropdown-menu dropdown-icon-only dropdown-yellow pull-right dropdown-caret dropdown-close">

																<li>
																	<a href='./edit?id=${(doc.id)!}' class="tooltip-success" data-rel="tooltip" title="编辑">
																		<span class="blue">
																			<i class="icon-edit bigger-120"></i>
																		</span>
																	</a>
																</li>

																<li>
																	<a href='./del?id=${(doc.id)!}' class="tooltip-error" data-rel="tooltip" title="删除">
																		<span class="red">
																			<i class="icon-trash bigger-120"></i>
																		</span>
																	</a>
																</li>

															</ul>
														</div>
													</div>
												</td>
											</tr>
										</#list>

										</tbody>
									</table><!-- table -->

								</div>
							</div>

							<!--PAGE CONTENT ENDS-->
						</div><!--/.span-->
					</div><!--/.row-fluid-->
				</div><!--/.page-content-->

				<#include "/_pagelet/settings.html"/>
			</div><!--/.main-content-->
		</div><!--/.main-container-->

		<#include "/_pagelet/footer.html"/>
		<#include "/_pagelet/js.html"/>
	</body>

	<script>

	function del(id, entity_id){
		if(confirm('你确定要执行该操作吗？')){
			$.ajax({
				url : './del',
				type : 'POST',
				dataType : 'JSON',
				data : {
					id: id,
					entity_id: entity_id,
				},
				success : function(data) {
					if (data.success){
						alert('操作成功');
						location.reload();
						return;
					}
					if (data.msg) alert(data.msg);
				},
				error : function() {
					alert(arguments[2]);
				}
			});
		}
	}
	</script>
</html>